{{template "base" .}}

{{define "content"}}
<div class="page-header">
    <h1>Gestione Fornitori</h1>
    {{if .Session.IsTecnico}}
    <a href="/fornitori/nuovo" class="btn btn-primary">Nuovo Fornitore</a>
    {{end}}
</div>

{{if .Data}}
<div class="table-container">
    <table class="table">
        <thead>
            <tr>
                <th>Nome</th>
                <th>Indirizzo</th>
                <th>Telefono</th>
                <th>Email</th>
                <th>Note</th>
                {{if .Session.IsTecnico}}
                <th>Azioni</th>
                {{end}}
            </tr>
        </thead>
        <tbody>
            {{range .Data}}
            <tr>
                <td>{{.Nome}}</td>
                <td>{{.Indirizzo}}</td>
                <td>{{.Telefono}}</td>
                <td>{{if .Email}}<a href="mailto:{{.Email}}">{{.Email}}</a>{{end}}</td>
                <td>{{.Note}}</td>
                {{if $.Session.IsTecnico}}
                <td class="table-actions">
                    <a href="/fornitori/modifica/{{.ID}}" class="btn btn-sm btn-secondary">Modifica</a>
                    <a href="/fornitori/elimina/{{.ID}}" class="btn btn-sm btn-danger btn-delete" onclick="return confirm('Sei sicuro?')">Elimina</a>
                </td>
                {{end}}
            </tr>
            {{end}}
        </tbody>
    </table>
</div>
{{else}}
<div class="empty-state">
    <h3>Nessun fornitore trovato</h3>
    {{if .Session.IsTecnico}}
    <a href="/fornitori/nuovo" class="btn btn-primary mt-2">Aggiungi il primo fornitore</a>
    {{end}}
</div>
{{end}}
{{end}}
